{"version":3,"sources":["webpack:///./src/DefColumn/CfheadColumn.js","webpack:///src/components/pharmacy/Cf.vue","webpack:///./src/components/pharmacy/Cf.vue","webpack:///./src/components/pharmacy/Cf.vue?7b52"],"names":["_accounting","__webpack_require__","CfheadColumn","title","dataIndex","key","width","ellipsis","customRender","text","record","disease2","index","accounting","formatMoney","name","data","moment","_moment2","default","doctors","dateRange","今日","startOf","endOf","昨天","subtract","前天","近一周","近一月","本月","本年","columns","_CfheadColumn2","pagination","current","pageSize","showTotal","total","range","fytime","filter","doctor","patient","tongji","tjcols","innerColumns","yongliang","danwei","cishu","yongfa","innerData","groupData","label","groupFn","item","opertime","substr","department","gender","price","totalprice","currentGroup","mounted","_this","this","axios","get","then","response","forEach","align","watch","console","log","groupByCustome","methods","query","fetch","_this2","beginTime","format","endTime","params","handleTableChange","_this3","_","find","x","chain","groupBy","map","val","obj","feibie","countBy","leixing","$accounting","sumBy","renci","uniqBy","length","cfcount","静滴","cfDetail","some","cur","defaults","_defineProperty3","金额","人次","处方数","value","expandInner","expanded","Object","defineProperty","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Cf_vue__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Cf_vue___default","n","__WEBPACK_IMPORT_KEY__","d","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_183a1af2_hasScoped_true_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Cf_vue__","__vue_styles__","ssrContext","Component","normalizeComponent","a","esExports","render","_vm","_h","$createElement","_c","_self","staticStyle","border","attrs","sub-title","slot","_v","showTime","ranges","model","callback","$$v","expression","on","change","handleChange","$set","_l","_s","placeholder","allowClear","maxLength","type","icon","click","default-active-key","tab","data-source","bordered","size","rowKey","expandRowByClick","scroll","y","expand","background","text-align","force-render","buttonStyle","checked","staticRenderFns"],"mappings":"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","file":"static/js/3.84107dd678c84b83cb66.js","sourcesContent":["import accounting from \"accounting\";\n\nlet CfheadColumn=[\n  // {\n  //   title: 'Name',\n  //   dataIndex: 'name',\n  //   key: 'name',\n  //   scopedSlots: { customRender: 'name' },\n  // },\n  {\n    title: '发药时间',\n    dataIndex: 'opertime',\n    key: 'opertime',\n    width:150\n  },\n  {\n    title: '处方类型',\n    dataIndex: 'cftype',\n    key: 'cftype',\n    ellipsis: true,\n  },\n  {\n    title: '就诊号',\n    dataIndex: 'pid',\n    key: 'pid',\n    ellipsis: true,\n  },\n  {\n    title: '患者',\n    dataIndex: 'patient',\n    key: 'patient',\n    ellipsis: true,\n  },\n  {\n    title: '年龄',\n    dataIndex: 'age',\n    key: 'age',\n    ellipsis: true,\n  },\n  {\n    title: '费别',\n    dataIndex: 'feibie',\n    key: 'feibie',\n    ellipsis: true,\n  },\n  {\n    title: '诊断',\n    dataIndex: 'disease',\n    key: 'disease',\n    ellipsis: true,\n    customRender:function(text,record){\n      if(record.disease2){\n        return text+\",\"+record.disease2\n      }\n      return text;\n\n    }\n  },\n  // {\n  //   title: '辅助诊断',\n  //   dataIndex: 'disease2',\n  //   key: 'disease2',\n  //   ellipsis: true,\n  // },\n  {\n    title: '医生',\n    dataIndex: 'doctor',\n    key: 'doctor',\n    ellipsis: true,\n  },\n  {\n    title: '金额',\n    dataIndex: 'totalprice',\n    key: 'totalprice',\n    ellipsis: true,\n    customRender:function(text,record,index){\n      return accounting.formatMoney(text,\"￥\",2,',','.');\n    }\n  },\n];\n\nexport default CfheadColumn\n\n\n\n// WEBPACK FOOTER //\n// ./src/DefColumn/CfheadColumn.js","<template>\n  <div>\n    <a-page-header\n    style=\"border: 1px solid rgb(235, 237, 240)\"\n    title=\"处方明细\"\n    sub-title=\"\"\n  >\n      <template slot=\"extra\">\n      发药时间：\n     <a-range-picker\n       :showTime=\"false\"\n        format=\"YYYY-MM-DD\"\n       :ranges=\" dateRange\"\n       v-model=\"fytime\"\n    />\n        医生：\n    <a-select  style=\"width: 120px\" @change=\"handleChange\"   v-model=\"filter.doctor\" >\n      <a-select-option value=\"\">所有医生</a-select-option>\n      <a-select-option :value=\"item\"  v-for=\"(item,index) in doctors\" :key=\"index\">\n        {{item}}\n      </a-select-option>\n    </a-select>\n        患者：\n    <a-input placeholder=\"患者姓名\" allowClear :maxLength=\"6\" style=\"width:100px;\"  v-model=\"filter.patient\"/>\n        <a-button type=\"primary\" icon=\"search\" @click=\"query\">查询</a-button>\n      </template>\n      <a-tabs default-active-key=\"1\" @change=\"callback\">\n      <a-tab-pane key=\"1\" tab=\"处方明细表\">\n        <a-table :columns=\"columns\" :data-source=\"data\"  bordered  size=\"small\" rowKey=\"opertime\" :expandRowByClick=\"true\"\n               :pagination=\"pagination\" @change=\"handleTableChange\" :scroll=\"{y:350}\"  @expand=\"expandInner\">\n           <a-table style=\"background:lightgoldenrodyellow\"\n         slot=\"expandedRowRender\" bordered size=\"small\"\n         :columns=\"innerColumns\"\n          :data-source=\"innerData\"\n         :pagination=\"false\"\n          rowKey=\"id\"\n          />\n\n       </a-table>\n      </a-tab-pane>\n      <a-tab-pane key=\"2\" tab=\"统计明细表\" force-render style=\"background: whitesmoke;text-align: center;\">\n        选择分组依据:\n        <a-radio-group v-model=\"currentGroup\" v-for=\"(item,index) in groupData \"\n                       :key=\"index\" name=\"radioGroup\" buttonStyle=\"solid\">\n        <a-radio-button :value=\"item.name\" :checked=\"index==0\">\n          {{item.label}}\n        </a-radio-button>\n\n      </a-radio-group>\n          <a-table :columns=\"tjcols\" :data-source=\"tongji\" :scroll=\"{y:350}\" size=\"small\" :pagination=\"false\">\n          </a-table>\n      </a-tab-pane>\n\n    </a-tabs>\n    </a-page-header>\n  </div>\n</template>\n\n<script>\n  import Vue from 'vue'\nimport CfheadColumn from '../../DefColumn/CfheadColumn'\n  import moment from 'moment'\n    export default {\n        name: \"Cf\",\n        data(){\n          return{\n            moment,\n            doctors:[],\n            dateRange:{\n              \"今日\":[moment().startOf('day'),moment().endOf('day')],\n              \"昨天\":[moment().subtract(1,'days').startOf('day'),moment().subtract(1,'days').endOf('day')],\n              \"前天\":[moment().subtract(2,'days').startOf('day'),moment().subtract(2,'days').endOf('day')],\n              \"近一周\":[moment().subtract(7,'days').startOf('day'),moment().endOf('day')],\n              \"近一月\":[moment().subtract(1,'months').startOf('day'),moment().endOf('day')],\n              \"本月\":[moment().startOf('month'),moment().endOf('day')],\n              \"本年\":[moment().startOf('year'),moment().endOf('day')],\n\n            },\n            data:[],\n            columns:CfheadColumn,\n            pagination:{\n              current:1,\n              pageSize:8,\n              showTotal:(total,range)=>{\n                return `${range[0]}至${range[1]}，共 ${total} 条记录数`;\n          }\n            },\n            fytime:[moment().startOf('month'),moment().endOf('day')],\n            filter:{\n              doctor:'',\n              patient:'',\n\n            },\n            tongji:[],\n            tjcols:[\n              {title:'医生',key:'医生',dataIndex:'医生'},\n              {title:'金额',key:'金额',dataIndex:'金额',ellipsis: true,width:150 },\n              {title:'人次',key:'人次',dataIndex:'人次'},\n              {title:'处方数',key:'处方数',dataIndex:'处方数'},\n              {title:'自费',key:'自费',dataIndex:'自费'},\n              {title:'医保',key:'医保',dataIndex:'医保'},\n              {title:'普通',key:'普通',dataIndex:'普通'},\n              {title:'儿科',key:'儿科',dataIndex:'儿科'},\n              {title:'精二',key:'精二',dataIndex:'精二'},\n              {title:'急诊',key:'急诊',dataIndex:'急诊'},\n              {title:'麻醉',key:'麻醉',dataIndex:'麻醉'},\n              {title:'静滴',key:'静滴',dataIndex:'静滴'},\n            ],\n            innerColumns:[\n              {title:'组号',key:'gid',dataIndex:'gid',width:50},\n              {title:'药品名称',key:'drug',dataIndex:'drug'},\n              {title:'规格',key:'spci',dataIndex:'spci'},\n              // {title:'单价',key:'drug',dataIndex:'drug'},\n              {title:'用法用量',customRender:function(text,record,index){\n                return record.yongliang+record.danwei+\"  \"+record.cishu+\"  \"+record.yongfa\n                }},\n              {title:'数量',key:'quantity',dataIndex:'quantity',width:50},\n              {title:'单位',key:'unit',dataIndex:'unit',width:50},\n\n            ],\n            innerData:[],\n            groupData:[\n              {name:'doctor',label:'医生',groupFn(item){return item.doctor}},\n              {name:'opertimeByDay',label:'日期(按日)',groupFn(item){return item.opertime.substr(0,10)}},\n              {name:'opertimeByMonth',label:'日期(按月)',groupFn(item){return item.opertime.substr(0,7)}},\n              {name:'department',label:'科室',groupFn(item){return item.department}},\n               {name:'gender',label:'性别',groupFn(item){return item.gender}},\n              {name:'totalprice',label:'处方金额',groupFn(item){\n                let price = item.totalprice;\n                if(price <=50){\n                  return '<=50元'\n                }else if(price >50 && price <=100){\n                  return '50至100元'\n                }else{\n                  return '>100元'\n                }\n              }},\n\n            ],\n            currentGroup: 'doctor'\n          }\n        },\n        mounted(){\n          this.axios.get(\"/springDemo/api/getDoctors.do\")\n            .then(response=>this.doctors=response.data);\n          this.innerColumns.forEach(item=>item.align='center');\n          this.tjcols.forEach(item=>item.align='center')\n\n        },\n      watch:{\n          currentGroup:function(){\n            console.log(this.currentGroup)\n            this.groupByCustome();\n          }\n      },\n      methods:{\n          query(){\n            this.pagination.current=1;\n            this.fetch();\n          },\n          fetch(){\n            this.filter.beginTime=this.fytime[0].format('YYYY-MM-DD HH:mm:ss');\n            this.filter.endTime=this.fytime[1].format('YYYY-MM-DD HH:mm:ss')\n            this.axios.get(\"/springDemo/api/CfHead.do\",{params:this.filter})\n              .then(response=>{\n                this.data=response.data;\n                this.groupByCustome();\n              })\n          },\n\n          handleTableChange(pagination){\n            this.pagination.current=pagination.current;\n          },\n          groupByCustome(){\n            let current = this._.find(this.groupData,x=>x.name==this.currentGroup);\n            console.log(current)\n            this.tongji =this._.chain(this.data).groupBy(item=>current.groupFn(item)).map((val,key,obj)=>{\n              let feibie = this._.countBy(val,'feibie')\n              let leixing =this._.countBy(val,'cftype')\n              let totalprice = this.$accounting.formatMoney(this._.sumBy(val,'totalprice'),\"￥\",2,',','.');\n              let renci = this._.uniqBy(val,'pid').length;\n              let cfcount = val.length;\n              let yongfa={\"静滴\":0}\n              val.forEach(item=>{\n                if(item.cfDetail.some(item=>item.yongfa=='静滴')){\n                  yongfa['静滴']++;\n                }\n              })\n              let cur = current.label;\n              this.tjcols[0].title=cur;\n              this.tjcols[0].label=cur;\n              this.tjcols[0].dataIndex=cur;\n              return this._.defaults({[cur]:key},feibie,leixing,{'金额':totalprice},{'人次':renci},{'处方数':cfcount},yongfa)\n            }).value();\n              console.log(this.tongji)\n          },\n        expandInner(expanded,record){\n            console.log(record);\n            if(expanded)\n             this.innerData = record.cfDetail;\n\n        }\n      }\n\n    }\n</script>\n\n<style scoped>\n  .ivu-form-inline  {\n    display: inline-block;\n    margin-left: 30px;\n     vertical-align: middle;\n    border-bottom: 1px solid blue;\n  }\n\n .ivu-form-item {\n    margin-bottom: 10px;\n    vertical-align: middle;\n    zoom: 1;\n}\n.ivu-modal-wrap *{\n  color:blue;\n}\n\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/pharmacy/Cf.vue","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-183a1af2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Cf.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Cf.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Cf.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-183a1af2\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Cf.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-183a1af2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/pharmacy/Cf.vue\n// module id = jXCt\n// module chunks = 3","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('a-page-header',{staticStyle:{\"border\":\"1px solid rgb(235, 237, 240)\"},attrs:{\"title\":\"处方明细\",\"sub-title\":\"\"}},[_c('template',{slot:\"extra\"},[_vm._v(\"\\n    发药时间：\\n   \"),_c('a-range-picker',{attrs:{\"showTime\":false,\"format\":\"YYYY-MM-DD\",\"ranges\":_vm.dateRange},model:{value:(_vm.fytime),callback:function ($$v) {_vm.fytime=$$v},expression:\"fytime\"}}),_vm._v(\"\\n      医生：\\n  \"),_c('a-select',{staticStyle:{\"width\":\"120px\"},on:{\"change\":_vm.handleChange},model:{value:(_vm.filter.doctor),callback:function ($$v) {_vm.$set(_vm.filter, \"doctor\", $$v)},expression:\"filter.doctor\"}},[_c('a-select-option',{attrs:{\"value\":\"\"}},[_vm._v(\"所有医生\")]),_vm._v(\" \"),_vm._l((_vm.doctors),function(item,index){return _c('a-select-option',{key:index,attrs:{\"value\":item}},[_vm._v(\"\\n      \"+_vm._s(item)+\"\\n    \")])})],2),_vm._v(\"\\n      患者：\\n  \"),_c('a-input',{staticStyle:{\"width\":\"100px\"},attrs:{\"placeholder\":\"患者姓名\",\"allowClear\":\"\",\"maxLength\":6},model:{value:(_vm.filter.patient),callback:function ($$v) {_vm.$set(_vm.filter, \"patient\", $$v)},expression:\"filter.patient\"}}),_vm._v(\" \"),_c('a-button',{attrs:{\"type\":\"primary\",\"icon\":\"search\"},on:{\"click\":_vm.query}},[_vm._v(\"查询\")])],1),_vm._v(\" \"),_c('a-tabs',{attrs:{\"default-active-key\":\"1\"},on:{\"change\":_vm.callback}},[_c('a-tab-pane',{key:\"1\",attrs:{\"tab\":\"处方明细表\"}},[_c('a-table',{attrs:{\"columns\":_vm.columns,\"data-source\":_vm.data,\"bordered\":\"\",\"size\":\"small\",\"rowKey\":\"opertime\",\"expandRowByClick\":true,\"pagination\":_vm.pagination,\"scroll\":{y:350}},on:{\"change\":_vm.handleTableChange,\"expand\":_vm.expandInner}},[_c('a-table',{staticStyle:{\"background\":\"lightgoldenrodyellow\"},attrs:{\"slot\":\"expandedRowRender\",\"bordered\":\"\",\"size\":\"small\",\"columns\":_vm.innerColumns,\"data-source\":_vm.innerData,\"pagination\":false,\"rowKey\":\"id\"},slot:\"expandedRowRender\"})],1)],1),_vm._v(\" \"),_c('a-tab-pane',{key:\"2\",staticStyle:{\"background\":\"whitesmoke\",\"text-align\":\"center\"},attrs:{\"tab\":\"统计明细表\",\"force-render\":\"\"}},[_vm._v(\"\\n      选择分组依据:\\n      \"),_vm._l((_vm.groupData),function(item,index){return _c('a-radio-group',{key:index,attrs:{\"name\":\"radioGroup\",\"buttonStyle\":\"solid\"},model:{value:(_vm.currentGroup),callback:function ($$v) {_vm.currentGroup=$$v},expression:\"currentGroup\"}},[_c('a-radio-button',{attrs:{\"value\":item.name,\"checked\":index==0}},[_vm._v(\"\\n        \"+_vm._s(item.label)+\"\\n      \")])],1)}),_vm._v(\" \"),_c('a-table',{attrs:{\"columns\":_vm.tjcols,\"data-source\":_vm.tongji,\"scroll\":{y:350},\"size\":\"small\",\"pagination\":false}})],2)],1)],2)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-183a1af2\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/pharmacy/Cf.vue\n// module id = pazr\n// module chunks = 3"],"sourceRoot":""}